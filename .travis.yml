matrix:
  include:
  
#Backend
  - language: java
    sudo: true
    before_install:
    - cd backend
    
    script: 
    - mvn test -B

#Frontend 
  - language: node_js
    services:
    - docker

    before_install:
    - cd frontend/javlet-app
    node_js:
    - '8'
    cache:
      directories:
      - node_modules
    before_script:
    - npm update
    install:
    - npm install
    script:
    - npm test
    - docker build -t dimmerworld/javlet-front .
    deploy:
        provider: script
        skip_cleanup: true
        script: bash docker_push
        on:
            branch: docker